import{X,Y as ie,U as $e,O as _e,au as Ae,av as Pe,W as le,c as E,n as P,m as re,x as N,d as L,l as B,an as se,N as ce,b as k,z as de,e as ue,as as ze,A,s as fe,a as m,ap as ve,T as O,w as q,y as Z,i as Y,aw as Ne,j as U,G as Oe,t as Ee,ax as Le,D as z,ah as De,ay as He,f as te,az as We,aq as Me,aA as ne,E as Ze,v as je,aB as Fe,aC as Ue,r as Ve,L as Xe,o as Ye,aD as qe,aE as Ke,ai as Ge,aj as Je}from"./index-2735b714.js";import{u as he}from"./use-id-0ce2db57.js";import{u as K}from"./index-868c3cdd.js";import{S as Qe,a as pe}from"./index-313c0163.js";import{u as et}from"./use-refs-09391ae5.js";function tt(e,i,r){let d=0;const n=e.scrollLeft,a=r===0?1:Math.round(r*1e3/16);function l(){e.scrollLeft+=(i-n)/a,++d<a&&X(l)}l()}function nt(e,i,r,d){let n=ie(e);const a=n<i,l=r===0?1:Math.round(r*1e3/16),h=(i-n)/l;function u(){n+=h,(a&&n>i||!a&&n<i)&&(n=i),$e(e,n),a&&n<i||!a&&n>i?X(u):d&&X(d)}u()}function be(e,i){if(!_e||!window.IntersectionObserver)return;const r=new IntersectionObserver(a=>{i(a[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&r.observe(e.value)},n=()=>{e.value&&r.unobserve(e.value)};Ae(n),Pe(n),le(d)}const[at,ot]=E("sticky"),it={zIndex:P,position:re("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var lt=L({name:at,props:it,emits:["scroll","change"],setup(e,{emit:i,slots:r}){const d=B(),n=se(d),a=ce({fixed:!1,width:0,height:0,transform:0}),l=k(()=>de(e.position==="top"?e.offsetTop:e.offsetBottom)),h=k(()=>{const{fixed:f,height:w,width:x}=a;if(f)return{width:`${x}px`,height:`${w}px`}}),u=k(()=>{if(!a.fixed)return;const f=ue(ze(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${l.value}px`});return a.transform&&(f.transform=`translate3d(0, ${a.transform}px, 0)`),f}),C=f=>i("scroll",{scrollTop:f,isFixed:a.fixed}),b=()=>{if(!d.value||ve(d))return;const{container:f,position:w}=e,x=O(d),v=ie(window);if(a.width=x.width,a.height=x.height,w==="top")if(f){const S=O(f),s=S.bottom-l.value-a.height;a.fixed=l.value>x.top&&S.bottom>0,a.transform=s<0?s:0}else a.fixed=l.value>x.top;else{const{clientHeight:S}=document.documentElement;if(f){const s=O(f),R=S-s.top-l.value-a.height;a.fixed=S-l.value<x.bottom&&S>s.top,a.transform=R<0?-R:0}else a.fixed=S-l.value<x.bottom}C(v)};return A(()=>a.fixed,f=>i("change",f)),fe("scroll",b,{target:n,passive:!0}),be(d,b),()=>{var f;return m("div",{ref:d,style:h.value},[m("div",{class:ot({fixed:a.fixed}),style:u.value},[(f=r.default)==null?void 0:f.call(r)])])}}});const rt=q(lt),[st,ae]=E("tab");var ct=L({name:st,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:P,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Z},setup(e,{slots:i}){const r=k(()=>{const n={},{type:a,color:l,disabled:h,isActive:u,activeColor:C,inactiveColor:b}=e;l&&a==="card"&&(n.borderColor=l,h||(u?n.backgroundColor=l:n.color=l));const w=u?C:b;return w&&(n.color=w),n}),d=()=>{const n=m("span",{class:ae("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||Y(e.badge)&&e.badge!==""?m(Ne,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>m("div",{id:e.id,role:"tab",class:[ae([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:r.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[dt,oe]=E("tabs");var ut=L({name:dt,props:{count:U(Number),inited:Boolean,animated:Boolean,duration:U(P),swipeable:Boolean,lazyRender:Boolean,currentIndex:U(Number)},emits:["change"],setup(e,{emit:i,slots:r}){const d=B(),n=h=>i("change",h),a=()=>{var h;const u=(h=r.default)==null?void 0:h.call(r);return e.animated||e.swipeable?m(Qe,{ref:d,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[u]}):u},l=h=>{const u=d.value;u&&u.state.active!==h&&u.swipeTo(h,{immediate:!e.inited})};return A(()=>e.currentIndex,l),Oe(()=>{l(e.currentIndex)}),K({swipeRef:d}),()=>m("div",{class:oe("content",{animated:e.animated||e.swipeable})},[a()])}});const[me,M]=E("tabs"),ft={type:re("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:Z,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:Z,lineWidth:P,lineHeight:P,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},ge=Symbol(me);var vt=L({name:me,props:ft,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:i,slots:r}){let d,n,a;const l=B(),h=B(),u=B(),C=B(),b=he(),f=se(l),[w,x]=et(),{children:v,linkChildren:S}=Ee(ge),s=ce({inited:!1,position:"",lineStyle:{},currentIndex:-1}),R=k(()=>v.length>e.swipeThreshold||!e.ellipsis||e.shrink),j=k(()=>({borderColor:e.color,background:e.background})),$=(t,o)=>{var c;return(c=t.name)!=null?c:o},G=k(()=>{const t=v[s.currentIndex];if(t)return $(t,s.currentIndex)}),F=k(()=>de(e.offsetTop)),J=k(()=>e.sticky?F.value+d:0),D=t=>{const o=h.value,c=w.value;if(!R.value||!o||!c||!c[s.currentIndex])return;const y=c[s.currentIndex].$el,g=y.offsetLeft-(o.offsetWidth-y.offsetWidth)/2;tt(o,g,t?0:+e.duration)},I=()=>{const t=s.inited;z(()=>{const o=w.value;if(!o||!o[s.currentIndex]||e.type!=="line"||ve(l.value))return;const c=o[s.currentIndex].$el,{lineWidth:y,lineHeight:g}=e,T=c.offsetLeft+c.offsetWidth/2,_={width:te(y),backgroundColor:e.color,transform:`translateX(${T}px) translateX(-50%)`};if(t&&(_.transitionDuration=`${e.duration}s`),Y(g)){const ee=te(g);_.height=ee,_.borderRadius=ee}s.lineStyle=_})},ye=t=>{const o=t<s.currentIndex?-1:1;for(;t>=0&&t<v.length;){if(!v[t].disabled)return t;t+=o}},H=(t,o)=>{const c=ye(t);if(!Y(c))return;const y=v[c],g=$(y,c),T=s.currentIndex!==null;s.currentIndex!==c&&(s.currentIndex=c,o||D(),I()),g!==e.active&&(i("update:active",g),T&&i("change",g,y.title)),a&&!e.scrollspy&&Me(Math.ceil(ne(l.value)-F.value))},W=(t,o)=>{const c=v.find((g,T)=>$(g,T)===t),y=c?v.indexOf(c):0;H(y,o)},Q=(t=!1)=>{if(e.scrollspy){const o=v[s.currentIndex].$el;if(o&&f.value){const c=ne(o,f.value)-J.value;n=!0,nt(f.value,c,t?0:+e.duration,()=>{n=!1})}}},we=(t,o,c)=>{const{title:y,disabled:g}=v[o],T=$(v[o],o);g||(Fe(e.beforeChange,{args:[T],done:()=>{H(o),Q()}}),Ue(t)),i("clickTab",{name:T,title:y,event:c,disabled:g})},xe=t=>{a=t.isFixed,i("scroll",t)},Se=t=>{z(()=>{W(t),Q(!0)})},Te=()=>{for(let t=0;t<v.length;t++){const{top:o}=O(v[t].$el);if(o>J.value)return t===0?0:t-1}return v.length-1},Ce=()=>{if(e.scrollspy&&!n){const t=Te();H(t)}},ke=()=>v.map((t,o)=>m(ct,Ze({key:t.id,id:`${b}-${o}`,ref:x(o),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:o===s.currentIndex,controls:t.id,scrollable:R.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:c=>we(t,o,c)},je(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Ie=()=>{if(e.type==="line"&&v.length)return m("div",{class:M("line"),style:s.lineStyle},null)},p=()=>{var t,o,c;const{type:y,border:g,sticky:T}=e,_=[m("div",{ref:T?void 0:u,class:[M("wrap"),{[We]:y==="line"&&g}]},[m("div",{ref:h,role:"tablist",class:M("nav",[y,{shrink:e.shrink,complete:R.value}]),style:j.value,"aria-orientation":"horizontal"},[(t=r["nav-left"])==null?void 0:t.call(r),ke(),Ie(),(o=r["nav-right"])==null?void 0:o.call(r)])]),(c=r["nav-bottom"])==null?void 0:c.call(r)];return T?m("div",{ref:u},[_]):_};A([()=>e.color,Le],I),A(()=>e.active,t=>{t!==G.value&&W(t)}),A(()=>v.length,()=>{s.inited&&(W(e.active),I(),z(()=>{D(!0)}))});const Be=()=>{W(e.active,!0),z(()=>{s.inited=!0,u.value&&(d=O(u.value).height),D(!0)})},Re=(t,o)=>i("rendered",t,o);return K({resize:()=>{I(),z(()=>{var t,o;return(o=(t=C.value)==null?void 0:t.swipeRef.value)==null?void 0:o.resize()})},scrollTo:Se}),De(I),He(I),le(Be),be(l,I),fe("scroll",Ce,{target:f,passive:!0}),S({id:b,props:e,setLine:I,onRendered:Re,currentName:G,scrollIntoView:D}),()=>m("div",{ref:l,class:M([e.type])},[e.sticky?m(rt,{container:l.value,offsetTop:F.value,onScroll:xe},{default:()=>[p()]}):p(),m(ut,{ref:C,count:v.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:H},{default:()=>{var t;return[(t=r.default)==null?void 0:t.call(r)]}})])}});const ht=Symbol(),[bt,V]=E("tab"),mt=ue({},Ve,{dot:Boolean,name:P,badge:P,title:String,disabled:Boolean,titleClass:Xe,titleStyle:[String,Object],showZeroBadge:Z});var gt=L({name:bt,props:mt,setup(e,{slots:i}){const r=he(),d=B(!1),{parent:n,index:a}=Ye(ge);if(!n)return;const l=()=>{var b;return(b=e.name)!=null?b:a.value},h=()=>{d.value=!0,n.props.lazyRender&&z(()=>{n.onRendered(l(),e.title)})},u=k(()=>{const b=l()===n.currentName.value;return b&&!d.value&&h(),b}),C=B(!u.value);return A(u,b=>{b?C.value=!1:qe(()=>{C.value=!0})}),A(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),Ke(ht,u),()=>{var b;const f=`${n.id}-${a.value}`,{animated:w,swipeable:x,scrollspy:v,lazyRender:S}=n.props;if(!i.default&&!w)return;const s=v||u.value;if(w||x)return m(pe,{id:r,role:"tabpanel",class:V("panel-wrapper",{inactive:C.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":f},{default:()=>{var $;return[m("div",{class:V("panel")},[($=i.default)==null?void 0:$.call(i)])]}});const j=d.value||v||!S?(b=i.default)==null?void 0:b.call(i):null;return K({id:r}),Ge(m("div",{id:r,role:"tabpanel",class:V("panel"),tabindex:s?0:-1,"aria-labelledby":f},[j]),[[Je,s]])}}});const kt=q(gt),It=q(vt);export{It as T,kt as a};
