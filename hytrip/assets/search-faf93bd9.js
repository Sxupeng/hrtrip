import{c as T,y as B,n as X,x as S,m as ee,d as $,l as y,t as te,an as _e,b as M,i as he,aF as me,s as fe,a as l,H as be,T as ye,aG as ge,N as Ce,o as se,ao as ke,k as ae,L as K,as as xe,ai as R,aj as E,E as ne,I as oe,w as P,e as Ie,r as Se,u as we,aw as Te,f as $e,_ as A,Z as m,$ as f,ak as j,af as U,a9 as W,aa as G,ag as Pe,aH as Ae,a6 as C,a2 as w,al as Y,a4 as Z,a3 as Le,a8 as D,G as Oe}from"./index-2735b714.js";import{B as Ve}from"./back-top-cc5761b0.js";import{u as Be}from"./city-c094342b.js";import{P as Re,S as Ee}from"./search-bar-742c2672.js";import{C as ce}from"./index-4ba5a9fa.js";import{u as Ne}from"./use-id-0ce2db57.js";import{u as Fe}from"./index-868c3cdd.js";import{u as le,S as He}from"./search-page-5c536052.js";import{S as ze}from"./content-list-e6d428d9.js";import"./index-313c0163.js";import"./format_date-d41629ae.js";const[re,O]=T("dropdown-menu"),De={overlay:B,zIndex:X,duration:S(.2),direction:ee("down"),activeColor:String,closeOnClickOutside:B,closeOnClickOverlay:B},ie=Symbol(re);var We=$({name:re,props:De,setup(e,{slots:s}){const o=Ne(),a=y(),t=y(),r=y(0),{children:c,linkChildren:d}=te(ie),v=_e(a),n=M(()=>c.some(_=>_.state.showWrapper)),u=M(()=>{if(n.value&&he(e.zIndex))return{zIndex:+e.zIndex+1}}),p=()=>{e.closeOnClickOutside&&c.forEach(_=>{_.toggle(!1)})},g=()=>{if(t.value){const _=ye(t);e.direction==="down"?r.value=_.bottom:r.value=ge.value-_.top}},N=()=>{n.value&&g()},F=_=>{c.forEach((i,h)=>{h===_?(g(),i.toggle()):i.state.showPopup&&i.toggle(!1,{immediate:!0})})},H=(_,i)=>{const{showPopup:h}=_.state,{disabled:b,titleClass:x}=_;return l("div",{id:`${o}-${i}`,role:"button",tabindex:b?void 0:0,class:[O("item",{disabled:b}),{[be]:!b}],onClick:()=>{b||F(i)}},[l("span",{class:[O("title",{down:h===(e.direction==="down"),active:h}),x],style:{color:h?e.activeColor:""}},[l("div",{class:"van-ellipsis"},[_.renderTitle()])])])};return d({id:o,props:e,offset:r}),me(a,p),fe("scroll",N,{target:v,passive:!0}),()=>{var _;return l("div",{ref:a,class:O()},[l("div",{ref:t,style:u.value,class:O("bar",{opened:n.value})},[c.map(H)]),(_=s.default)==null?void 0:_.call(s)])}}});const[Ge,V]=T("dropdown-item"),je={title:String,options:ae(),disabled:Boolean,teleport:[String,Object],lazyRender:B,modelValue:K,titleClass:K};var Ue=$({name:Ge,inheritAttrs:!1,props:je,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:s,slots:o,attrs:a}){const t=Ce({showPopup:!1,transition:!0,showWrapper:!1}),{parent:r,index:c}=se(ie);if(!r)return;const d=i=>()=>s(i),v=d("open"),n=d("close"),u=d("opened"),p=()=>{t.showWrapper=!1,s("closed")},g=i=>{e.teleport&&i.stopPropagation()},N=(i=!t.showPopup,h={})=>{i!==t.showPopup&&(t.showPopup=i,t.transition=!h.immediate,i&&(t.showWrapper=!0))},F=()=>{if(o.title)return o.title();if(e.title)return e.title;const i=e.options.find(h=>h.value===e.modelValue);return i?i.text:""},H=i=>{const{activeColor:h}=r.props,b=i.value===e.modelValue,x=()=>{t.showPopup=!1,i.value!==e.modelValue&&(s("update:modelValue",i.value),s("change",i.value))},I=()=>{if(b)return l(oe,{class:V("icon"),color:h,name:"success"},null)};return l(ce,{role:"menuitem",key:i.value,icon:i.icon,title:i.text,class:V("option",{active:b}),style:{color:b?h:""},tabindex:b?0:-1,clickable:!0,onClick:x},{value:I})},_=()=>{const{offset:i}=r,{zIndex:h,overlay:b,duration:x,direction:I,closeOnClickOverlay:ve}=r.props,z=xe(h);return I==="down"?z.top=`${i.value}px`:z.bottom=`${i.value}px`,R(l("div",ne({style:z,class:V([I]),onClick:g},a),[l(Re,{show:t.showPopup,"onUpdate:show":L=>t.showPopup=L,role:"menu",class:V("content"),overlay:b,position:I==="down"?"top":"bottom",duration:t.transition?x:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${r.id}-${c.value}`,closeOnClickOverlay:ve,onOpen:v,onClose:n,onOpened:u,onClosed:p},{default:()=>{var L;return[e.options.map(H),(L=o.default)==null?void 0:L.call(o)]}})]),[[E,t.showWrapper]])};return Fe({state:t,toggle:N,renderTitle:F}),()=>e.teleport?l(ke,{to:e.teleport},{default:()=>[_()]}):_()}});const de=P(Ue),Me=P(We),[ue,Ke]=T("sidebar"),pe=Symbol(ue),Ye={modelValue:S(0)};var Ze=$({name:ue,props:Ye,emits:["change","update:modelValue"],setup(e,{emit:s,slots:o}){const{linkChildren:a}=te(pe),t=()=>+e.modelValue;return a({getActive:t,setActive:c=>{c!==t()&&(s("update:modelValue",c),s("change",c))}}),()=>{var c;return l("div",{role:"tablist",class:Ke()},[(c=o.default)==null?void 0:c.call(o)])}}});const qe=P(Ze),[Je,q]=T("sidebar-item"),Qe=Ie({},Se,{dot:Boolean,title:String,badge:X,disabled:Boolean,badgeProps:Object});var Xe=$({name:Je,props:Qe,emits:["click"],setup(e,{emit:s,slots:o}){const a=we(),{parent:t,index:r}=se(pe);if(!t)return;const c=()=>{e.disabled||(s("click",r.value),t.setActive(r.value),a())};return()=>{const{dot:d,badge:v,title:n,disabled:u}=e,p=r.value===t.getActive();return l("div",{role:"tab",class:q({select:p,disabled:u}),tabindex:u?void 0:0,"aria-selected":p,onClick:c},[l(Te,ne({dot:d,class:q("text"),content:v},e.badgeProps),{default:()=>[o.title?o.title():n]})])}}});const et=P(Xe),[tt,k]=T("tree-select"),st={max:S(1/0),items:ae(),height:S(300),selectedIcon:ee("success"),mainActiveIndex:S(0),activeId:{type:[Number,String,Array],default:0}};var at=$({name:tt,props:st,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(e,{emit:s,slots:o}){const a=n=>Array.isArray(e.activeId)?e.activeId.includes(n):e.activeId===n,t=n=>{const u=()=>{if(n.disabled)return;let p;if(Array.isArray(e.activeId)){p=e.activeId.slice();const g=p.indexOf(n.id);g!==-1?p.splice(g,1):p.length<e.max&&p.push(n.id)}else p=n.id;s("update:activeId",p),s("clickItem",n)};return l("div",{key:n.id,class:["van-ellipsis",k("item",{active:a(n.id),disabled:n.disabled})],onClick:u},[n.text,a(n.id)&&l(oe,{name:e.selectedIcon,class:k("selected")},null)])},r=n=>{s("update:mainActiveIndex",n)},c=n=>s("clickNav",n),d=()=>{const n=e.items.map(u=>l(et,{dot:u.dot,title:u.text,badge:u.badge,class:[k("nav-item"),u.className],disabled:u.disabled,onClick:c},null));return l(qe,{class:k("nav"),modelValue:e.mainActiveIndex,onChange:r},{default:()=>[n]})},v=()=>{if(o.content)return o.content();const n=e.items[+e.mainActiveIndex]||{};if(n.children)return n.children.map(t)};return()=>l("div",{class:k(),style:{height:$e(e.height)}},[d(),l("div",{class:k("content")},[v()])])}});const nt=P(at);const ot={key:0,class:"search-tabs"},ct={__name:"search-01-tabs-cpn",props:{searchTopList:{type:Object,default:()=>({})},tabTitle:{type:String,default:"默认"}},setup(e){const s=y(0),o=y(1),a=()=>{console.log(s.value)};return(t,r)=>{const c=nt,d=de;return e.searchTopList?(m(),f("div",ot,[l(d,{title:e.tabTitle},{default:j(()=>[l(c,{"active-id":s.value,"onUpdate:activeId":r[0]||(r[0]=v=>s.value=v),"main-active-index":o.value,"onUpdate:mainActiveIndex":r[1]||(r[1]=v=>o.value=v),items:e.searchTopList,onClickItem:a},null,8,["active-id","main-active-index","items"])]),_:1},8,["title"])])):U("",!0)}}},J=A(ct,[["__scopeId","data-v-8db5130c"]]);const lt={class:"search-tabs-cpn"},rt={__name:"search-02-tabs-two",props:{searchTopList:{type:Object,default:()=>({})}},setup(e){const s=y("欢迎度排序"),o=y(null),a=t=>{o.value.toggle(),s.value=t.label};return(t,r)=>{const c=ce,d=de;return m(),f("div",lt,[l(d,{title:s.value,ref_key:"itemRef",ref:o},{default:j(()=>[(m(!0),f(W,null,G(e.searchTopList.items,v=>(m(),Pe(c,{key:v,center:"",title:v.label,onClick:n=>a(v)},null,8,["title","onClick"]))),128))]),_:1},8,["title"])])}}},it=A(rt,[["__scopeId","data-v-06f7a3c5"]]);function Q(e){return e.map(s=>{let o=[];if(s.items){let a=s.items.map(t=>({text:t.label,id:t.value}));a.length&&o.push(a)}if(s.subGroups){let a=s.subGroups.map((t,r)=>{let c=t.items.map(d=>({text:d.label,id:d.value}));return{text:t.label,id:r,children:c}});a.length&&o.push(a)}return{text:s.label,children:o[0]}})}const dt={class:"search-tabs"},ut={__name:"search-01-tabs",props:{searchTopList:{type:Array,default:()=>[]}},setup(e){const s=e,o=le();let a=[],t=[];return Ae(()=>{a=Q(s.searchTopList[0].subGroups),o.searchTopList0=a,t=Q(s.searchTopList[2].subGroups)}),(r,c)=>{const d=Me;return m(),f("div",dt,[l(d,null,{default:j(()=>[l(J,{searchTopList:C(a),"tab-title":"位置"},null,8,["searchTopList"]),l(it,{searchTopList:e.searchTopList[1]},null,8,["searchTopList"]),l(J,{searchTopList:C(t),"tab-title":"筛选"},null,8,["searchTopList"])]),_:1})])}}},pt=A(ut,[["__scopeId","data-v-1a57a255"]]);const vt={class:"search-categories"},_t={class:"infos"},ht=["onClick"],mt={key:0,class:"iten"},ft=["onClick"],bt={class:"box"},yt={__name:"search-02-categories",props:{searchHotFilters:{type:Array,default:()=>[]}},setup(e){const s=y(1),o=y(0),a=y(!1),t=c=>{c===0?a.value=!a.value:(s.value=c,a.value=!1)},r=c=>{a.value=!1,o.value=c};return(c,d)=>{var v,n;return m(),f("div",vt,[w("div",_t,[(m(!0),f(W,null,G(e.searchHotFilters,(u,p)=>(m(),f("div",{key:u.label,class:Y(["item",{active:s.value===p}]),onClick:g=>t(p)},Z(u.label),11,ht))),128))]),(v=e.searchHotFilters[0])!=null&&v.subFilterItems?R((m(),f("div",mt,[(m(!0),f(W,null,G((n=e.searchHotFilters[0])==null?void 0:n.subFilterItems,(u,p)=>(m(),f("div",{key:u.label,class:Y(["iten-label",{active:o.value===p}]),onClick:g=>r(p)},Z(u.label),11,ft))),128))],512)),[[E,a.value]]):U("",!0),R(w("div",bt,null,512),[[E,a.value]])])}}},gt=A(yt,[["__scopeId","data-v-4d83cb35"]]);const Ct={class:"search container"},kt={class:"search-bar"},xt={class:"top"},It={class:"more"},St={key:0,class:"search-page"},wt={__name:"search",setup(e){const s=Le(),o=Be(),a=le(),{currentCity:t}=D(o),{isShowSearch:r}=D(s);Oe(()=>{s.isShowTab=!1,s.isShowSearch=!1}),a.getSearchTop(),a.getSearchResult();const{searchTopList:c,searchResult:d,housePicture:v}=D(a),n=()=>{s.isShowSearch=!0};return(u,p)=>(m(),f("div",Ct,[R(w("div",kt,[w("div",xt,[l(Ee,{city:C(t).cityName,content:"搜索波尔塔拉的景点",isShow:!1,"is-tab":!0,onClick:n},null,8,["city"]),l(pt,{searchTopList:C(c)},null,8,["searchTopList"]),l(gt,{searchHotFilters:C(d)},null,8,["searchHotFilters"])]),w("div",It,[l(ze,{content:C(v)},null,8,["content"])])],512),[[E,!C(r)]]),C(r)?(m(),f("div",St,[l(He)])):U("",!0),l(Ve)]))}},Ft=A(wt,[["__scopeId","data-v-08506e6a"]]);export{Ft as default};
